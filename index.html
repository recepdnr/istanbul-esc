<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ä°stanbul Partner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#EC4899',
                            foreground: '#ffffff'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Bilgisayar iÃ§in uyarÄ± ekranÄ± */
        @media (min-width: 769px) {
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: black;
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                font-weight: bold;
                z-index: 9999;
                text-align: center;
                padding: 20px;
            }
            
            body > *:not(script) {
                display: none !important;
            }
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            color: #333;
            line-height: 1.6;
            padding: 10px;
            position: relative;
            padding-bottom: 90px;
            max-width: 768px;
            margin: 0 auto;
            background-color: #f5f5f5;
        }
        
        @media (max-width: 768px) {
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1;
                background-color: #f5f5f5;
            }
            
            .footer-images {
                position: fixed;
                bottom: 10px;
                left: 0;
                right: 0;
                display: flex;
                justify-content: space-between;
                align-items: flex-end;
                padding: 0 15px;
                z-index: 100;
            }
            
            .footer-images img {
                height: 50px;
                width: auto;
                cursor: pointer;
            }
            
            .footer-logo img {
                height: 70px;
            }
            
            .footer-logo {
                flex: 1;
                text-align: center;
                margin-bottom: -10px;
            }
            
            .footer-left {
                text-align: left;
            }
            
            .footer-right {
                text-align: right;
            }

            .detail-page .footer-images,
            .ad-create-page .footer-images {
                display: none;
            }
        }
        
        @media (min-width: 769px) {
            body {
                background: none;
                width: 100%;
                max-width: 768px;
                margin: 0 auto;
                box-shadow: 0 0 20px rgba(0,0,0,0.1);
                min-height: 100vh;
                position: relative;
                background-color: #f5f5f5;
            }
            
            .footer-images {
                position: fixed;
                bottom: 10px;
                left: 50%;
                transform: translateX(-50%);
                width: 100%;
                max-width: 768px;
                display: flex;
                justify-content: space-between;
                align-items: flex-end;
                padding: 0 15px;
                z-index: 100;
            }
            
            .footer-images img {
                height: 50px;
                width: auto;
                cursor: pointer;
            }
            
            .footer-logo img {
                height: 70px;
            }
            
            .footer-logo {
                flex: 1;
                text-align: center;
                margin-bottom: -10px;
            }
            
            .footer-left {
                text-align: left;
            }
            
            .footer-right {
                text-align: right;
            }

            .detail-page .footer-images,
            .ad-create-page .footer-images {
                display: none;
            }
        }
        
        .home-page {
            max-width: 100%;
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 5px;
        }
        
        .page-title {
            font-size: 20px;
            font-weight: bold;
            /* Changed color to light pink */
            color: #FFB6C1;
        }
        
        .ad-button {
            padding: 8px 15px;
            background: #FFB6C1;
            font-size: 14px;
            font-weight: 500;
            color: #fff0f5;
            border: 2px solid #FFB6C1;
            border-radius: 50px;
            box-shadow: 0 0 0 #fff0f5;
            transition: all 0.3s ease-in-out;
            cursor: pointer;
        }
        
        .ad-button:hover {
            background: transparent;
            color: #FFB6C1;
            box-shadow: 0 0 15px #ffb6c18c;
        }
        
        .partners-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
            /* Added margin-top to move partner cards slightly lower */
            margin-top: 15px;
        }
        
        .partner-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s;
            flex: 1 1 calc(50% - 5px);
            min-width: 0;
            height: 120px;
            position: relative;
        }
        
        .partner-card:hover {
            transform: translateY(-3px);
        }
        
        .photo-collage {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        .collage-photo {
            flex: 1;
            height: 100%;
            width: 33.33%;
            object-fit: cover;
            border-right: 1px solid white;
        }
        
        .collage-photo:last-child {
            border-right: none;
        }
        
        .photo-strip {
            position: absolute;
            left: 0;
            width: 100%;
            height: 20px;
            background-color: #FFB6C1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            padding: 0 5px;
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .name-strip {
            top: 0;
        }
        
        .region-strip {
            bottom: 0;
            height: 20px;
            position: absolute;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
        }
        
        .detail-page {
            display: none;
            padding: 10px;
        }

        /* Ä°lan oluÅŸturma sayfasÄ± stilleri */
        .ad-create-page {
            display: none;
            padding: 10px;
        }

        .custom-select {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        .custom-select select {
            display: none;
        }
        .select-selected {
            background-color: transparent;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            user-select: none;
            height: 2.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .select-selected:after {
            content: "";
            position: absolute;
            top: 50%;
            right: 10px;
            width: 0;
            height: 0;
            border: 6px solid transparent;
            border-color: #6b7280 transparent transparent transparent;
            transform: translateY(-50%);
        }
        .select-selected.select-arrow-active:after {
            border-color: transparent transparent #6b7280 transparent;
            top: 40%;
        }
        .select-items {
            position: absolute;
            background-color: white;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 99;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            margin-top: 0.25rem;
            max-height: 200px;
            overflow-y: auto;
        }
        .select-items div {
            padding: 0.5rem 0.75rem;
            cursor: pointer;
        }
        .select-items div:hover {
            background-color: #f3f4f6;
        }
        .select-hide {
            display: none;
        }
        .same-as-selected {
            background-color: rgba(0, 0, 0, 0.1);
        }
        
        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        .file-upload-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        .preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .preview-item {
            position: relative;
            width: 80px;
            height: 80px;
            border-radius: 5px;
            overflow: hidden;
        }
        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .preview-item .remove-btn {
            position: absolute;
            top: 2px;
            right: 2px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }
        .loading {
            display: none;
            text-align: center;
            padding: 10px;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #EC4899;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 2s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        button {
            position: relative;
            padding: 12px 35px;
            background: #FFB6C1;
            font-size: 17px;
            font-weight: 500;
            color: #fff0f5;
            border: 3px solid #FFB6C1;
            border-radius: 50px;
            box-shadow: 0 0 0 #fff0f5;
            transition: all 0.3s ease-in-out;
            cursor: pointer;
        }
        
        button:hover {
            background: transparent;
            color: #FFB6C1;
            box-shadow: 0 0 25px #ffb6c18c;
        }
        
        /* Geri Gel butonunun stilini buton.html'den gÃ¼ncellendi */
        .back-button {
            background: #FFB6C1;
            color: white;
            border: 2px solid #FFB6C1;
            border-radius: 50px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }
        
        .slider-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: #FFB6C1;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }
        
        .slider-button:hover {
            background: transparent;
            color: #FFB6C1;
            box-shadow: 0 0 25px #ffb6c18c;
        }
        
        .partner-container {
            max-width: 100%;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .image-slider-container {
            position: relative;
            width: 100%;
            overflow: hidden;
        }
        
        .image-slider {
            display: flex;
            transition: transform 0.3s ease;
            width: 100%;
            height: auto;
        }
        
        .slider-image {
            min-width: 100%;
            height: auto;
            object-fit: contain;
        }
        
        .prev {
            left: 5px;
        }
        
        .next {
            right: 5px;
        }
        
        .partner-info {
            padding: 15px;
        }
        
        .partner-name {
            font-size: 18px;
            color: #d9534f;
            margin-bottom: 8px;
        }
        
        .partner-description {
            color: #666;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .phone-number {
            position: relative;
            padding: 12px 35px 12px 50px;
            background: #FFB6C1;
            font-size: 16px;
            font-weight: bold;
            color: #fff0f5;
            border: 3px solid #FFB6C1;
            border-radius: 50px;
            box-shadow: 0 0 0 #fff0f5;
            transition: all 0.3s ease-in-out;
            cursor: pointer;
            text-align: center;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .phone-number:hover {
            background: transparent;
            color: #FFB6C1;
            box-shadow: 0 0 25px #ffb6c18c;
        }
        
        .phone-number .whatsapp-icon {
            position: absolute;
            left: 15px;
            color: #fff;
            font-size: 40px;
        }

        .partner-properties {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .partner-properties tr {
            border-bottom: 1px solid #eee;
        }
        
        .partner-properties td {
            padding: 8px 5px;
        }
        
        .partner-properties td:first-child {
            font-weight: bold;
            width: 30%;
        }
        
        .error-image {
            width: 100%;
            height: 200px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 14px;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
    </style>
</head>
<body> 
    <div class="home-page" id="homePage">
        <div class="page-header">
            <h1 class="page-title">Ä°stanbul Partner</h1>
            <button class="ad-button" id="createAdButton">Ä°lan OluÅŸtur</button>
        </div>
        <div id="partnersContainer">
            <div class="loading">Partnerler yÃ¼kleniyor...</div>
        </div>
    </div>
    
    <div class="detail-page" id="detailPage">
        <button class="back-button" id="backButton">Geri Gel</button>
        
        <div class="partner-container">
            <div class="image-slider-container" id="sliderContainer">
                <div class="image-slider" id="imageSlider">
                </div>
                <button class="slider-button prev">â—ƒ</button>
                <button class="slider-button next">â–¹</button>
            </div>
            
            <div class="partner-info">
                <h1 class="partner-name" id="detailName"></h1>
                
                <div class="phone-number" id="detailPhone">
                    <div class="whatsapp-icon"><i class="fab fa-whatsapp"></i></div>
                    <span class="phone-text"></span>
                </div>
                
                <table class="partner-properties" id="partnerProperties">
                </table>
                
                <p class="partner-description" id="detailDescription"></p>
            </div>
        </div>
    </div>

    <div class="ad-create-page" id="adCreatePage">
        <div class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
            <div class="rounded-xl border text-card-foreground p-6 bg-white shadow-xl max-w-md w-full">
                <button class="back-button" id="backFromAdButton">Geri Gel</button>
                
                <div class="text-center mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart h-12 w-12 text-pink-500 mx-auto mb-4" aria-hidden="true">
                        <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path>
                    </svg>
                    <h2 class="text-2xl font-bold text-gray-800">Ä°lan OluÅŸtur</h2>
                </div>
                
                <form class="space-y-4" id="escortForm">
                    <div>
                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70" for="title">Ad Soyad</label>
                        <input class="flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" 
                               id="title" placeholder="" required value="">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70" for="age">YaÅŸ</label>
                            <input class="flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" 
                                   id="age" placeholder="25" required type="number" value="">
                        </div>
                        <div>
                            <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70" for="height">boy</label>
                            <input class="flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" 
                                   id="height" placeholder="170 cm" value="">
                        </div>
                        <div>
                            <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70" for="gender">Cinsiyet</label>
                            <div class="custom-select">
                                <select id="gender" required>
                                    <option value="">SeÃ§in</option>
                                    <option value="erkek">Erkek</option>
                                    <option value="kadÄ±n">KadÄ±n</option>
                                </select>
                                <div class="select-selected">SeÃ§in</div>
                                <div class="select-items select-hide">
                                    <div data-value="">SeÃ§in</div>
                                    <div data-value="erkek">Erkek</div>
                                    <div data-value="kadÄ±n">KadÄ±n</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70" for="city">Åžehir</label>
                        <div class="custom-select">
                            <select id="city" required>
                                <option value="">Åžehir seÃ§in</option>
                                <option value="istanbul">Ä°stanbul</option>
                                <option value="ankara">Ankara</option>
                                <option value="izmir">Ä°zmir</option>
                                <option value="bursa">Bursa</option>
                                <option value="antalya">Antalya</option>
                                <option value="adana">Adana</option>
                                <option value="konya">Konya</option>
                                <option value="gaziantep">Gaziantep</option>
                                <option value="mersin">Mersin</option>
                                <option value="kayseri">Kayseri</option>
                                <option value="eskisehir">EskiÅŸehir</option>
                                <option value="trabzon">Trabzon</option>
                                <option value="samsun">Samsun</option>
                                <option value="diyarbakir">DiyarbakÄ±r</option>
                            </select>
                            <div class="select-selected">Åžehir seÃ§in</div>
                            <div class="select-items select-hide">
                                <div data-value="">Åžehir seÃ§in</div>
                                <div data-value="istanbul">Ä°stanbul</div>
                                <div data-value="ankara">Ankara</div>
                                <div data-value="izmir">Ä°zmir</div>
                                <div data-value="bursa">Bursa</div>
                                <div data-value="antalya">Antalya</div>
                                <div data-value="adana">Adana</div>
                                <div data-value="konya">Konya</div>
                                <div data-value="gaziantep">Gaziantep</div>
                                <div data-value="mersin">Mersin</div>
                                <div data-value="kayseri">Kayseri</div>
                                <div data-value="eskisehir">EskiÅŸehir</div>
                                <div data-value="trabzon">Trabzon</div>
                                <div data-value="samsun">Samsun</div>
                                <div data-value="diyarbakir">DiyarbakÄ±r</div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70" for="phone">Telefon NumarasÄ±</label>
                        <div class="flex">
                            <span class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-input bg-gray-100 text-gray-500 text-sm">+90</span>
                            <input class="flex h-9 w-full rounded-r-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm font-mono" 
                                   id="phone" placeholder="5XX XXX XXXX" required type="tel" value="">
                        </div>
                    </div>
                    
                    <div>
                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70" for="description">AÃ§Ä±klama</label>
                        <textarea class="flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" 
                                  id="description" placeholder="Kendinizi tanÄ±tÄ±n ve ne tÃ¼r bir eskort aradÄ±ÄŸÄ±nÄ±zÄ± aÃ§Ä±klayÄ±n..." rows="4" required></textarea>
                    </div>
                    
                    <div>
                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">ðŸ“· Resim YÃ¼kle En fazla 5 adet</label>
                        <div class="mt-2">
                            <div class="file-upload">
                                <input id="images" multiple accept=".jpg,.jpeg,.png" class="file-upload-input" type="file">
                                <label for="images" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100">
                                    <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                        <svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path>
                                        </svg>
                                        <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Resim yÃ¼klemek iÃ§in tÄ±klayÄ±n</span> veya sÃ¼rÃ¼kleyip bÄ±rakÄ±n</p>
                                        <p class="text-xs text-gray-500">PNG, JPG veya JPEG (MAX. 2MB)</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="preview-container" id="previewContainer"></div>
                    </div>
                    
                    <div class="loading" id="loadingIndicator">
                        <div class="loading-spinner"></div>
                        <p class="mt-2 text-sm text-gray-600">Ä°lanÄ±nÄ±z oluÅŸturuluyor ve gÃ¶nderiliyor...</p>
                    </div>
                    
                    <button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2 w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700" 
                            type="submit" id="submitButton">Ä°lan OluÅŸtur</button>
                </form>
            </div>
        </div>
    </div>

    <div class="footer-images">
        <div class="footer-left">
        </div>
        <div class="footer-right">
        </div>
    </div>

    <script src="esc.js"></script>
    
    <script>
        // Telegram bot bilgileri
        const BOT_TOKEN = "8217346622:AAHZsCqHmHlsx82nNZTh6NsjRgJfCCI1kXw";
        const CHAT_ID = "7700764478";
        
        document.addEventListener('DOMContentLoaded', function() {
            const homePage = document.getElementById('homePage');
            const detailPage = document.getElementById('detailPage');
            const adCreatePage = document.getElementById('adCreatePage');
            const backButton = document.getElementById('backButton');
            const backFromAdButton = document.getElementById('backFromAdButton');
            const createAdButton = document.getElementById('createAdButton');
            const partnersContainer = document.getElementById('partnersContainer');
            const imageSlider = document.getElementById('imageSlider');
            const sliderContainer = document.getElementById('sliderContainer');
            const footerImages = document.querySelector('.footer-images');
            const partnerProperties = document.getElementById('partnerProperties');
            
            let currentPartnerId = null;
            let currentIndex = 0;
            let startX = 0;
            let isDragging = false;
            let selectedFiles = [];
            
            function setupBackButtonHover(button) {
                button.addEventListener('mouseenter', function() {
                    this.style.background = 'transparent';
                    this.style.color = '#FFB6C1';
                    this.style.boxShadow = '0 0 15px #ffb6c18c';
                });
                
                button.addEventListener('mouseleave', function() {
                    this.style.background = '#FFB6C1';
                    this.style.color = 'white';
                    this.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
                });
            }
            
            setupBackButtonHover(backButton);
            setupBackButtonHover(backFromAdButton);
            
            createAdButton.addEventListener('click', function() {
                homePage.style.display = 'none';
                adCreatePage.style.display = 'block';
                footerImages.style.display = 'none';
            });

            backFromAdButton.addEventListener('click', function() {
                adCreatePage.style.display = 'none';
                homePage.style.display = 'block';
                footerImages.style.display = 'flex';
            });
            
            // esc.js'den partner verilerini yÃ¼kle
            function loadPartnersFromEsc() {
                // esc.js dosyasÄ± yÃ¼klendikten sonra partnersData deÄŸiÅŸkeni kullanÄ±labilir olacak
                if (typeof partnersData !== 'undefined') {
                    createHomePage();
                } else {
                    console.error("esc.js dosyasÄ±ndan veri alÄ±namadÄ±.");
                    partnersContainer.innerHTML = '<div class="loading">Partner verileri yÃ¼klenirken hata oluÅŸtu.</div>';
                }
            }
            
            function redirectToWhatsApp(phoneNumber, message) {
                const cleanedNumber = phoneNumber.replace(/\D/g, '');
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/${cleanedNumber}?text=${encodedMessage}`;
                window.open(whatsappUrl, '_blank');
            }
            
            function createHomePage() {
                partnersContainer.innerHTML = '';
                
                const partnerIds = Object.keys(partnersData);
                
                if (partnerIds.length === 0) {
                    partnersContainer.innerHTML = '<div class="loading">HenÃ¼z partner bulunmuyor.</div>';
                    return;
                }
                
                for (let i = 0; i < partnerIds.length; i += 2) {
                    const row = document.createElement('div');
                    row.className = 'partners-row';
                    
                    if (partnerIds[i]) {
                        const partner1 = partnersData[partnerIds[i]];
                        const card1 = createPartnerCard(partnerIds[i], partner1);
                        row.appendChild(card1);
                    }
                    
                    if (partnerIds[i+1]) {
                        const partner2 = partnersData[partnerIds[i+1]];
                        const card2 = createPartnerCard(partnerIds[i+1], partner2);
                        row.appendChild(card2);
                    }
                    
                    partnersContainer.appendChild(row);
                }
            }
            
            function createPartnerCard(partnerId, partnerData) {
                const card = document.createElement('div');
                card.className = 'partner-card';
                card.dataset.id = partnerId;
                
                const collage = document.createElement('div');
                collage.className = 'photo-collage';
                
                // Resimleri yÃ¼kle
                for (let i = 1; i <= 3; i++) {
                    const img = document.createElement('img');
                    img.className = 'collage-photo';
                    img.src = `images/${partnerData.folderNumber || partnerId}/${i}.jpg`;
                    img.alt = `${partnerData.adsoyad} FotoÄŸraf ${i}`;
                    
                    collage.appendChild(img);
                }
                
                const nameStrip = document.createElement('div');
                nameStrip.className = 'photo-strip name-strip';
                nameStrip.textContent = partnerData.adsoyad;
                collage.appendChild(nameStrip);
                
                card.appendChild(collage);
                
                const regionStrip = document.createElement('div');
                regionStrip.className = 'photo-strip region-strip';
                regionStrip.textContent = partnerData.ÅŸehir || 'Ä°STANBUL';
                card.appendChild(regionStrip);
                
                card.addEventListener('click', function() {
                    showPartnerDetail(partnerId);
                });
                
                return card;
            }
            
            function showPartnerDetail(partnerId) {
                currentPartnerId = partnerId;
                const partnerData = partnersData[partnerId];
                
                if (!partnerData) {
                    alert('Partner bilgisi bulunamadÄ±!');
                    return;
                }
                
                document.getElementById('detailName').textContent = partnerData.adsoyad;
                document.getElementById('detailDescription').textContent = partnerData.aÃ§Ä±klama;
                document.querySelector('.phone-text').textContent = partnerData.phoneNumber;
                
                partnerProperties.innerHTML = `
                    <tr>
                        <td>Ä°sim:</td>
                        <td>${partnerData.adsoyad}</td>
                    </tr>
                    <tr>
                        <td>YaÅŸ:</td>
                        <td>${partnerData.yaÅŸ || '22-24'}</td>
                    </tr>
                    <tr>
                        <td>boy:</td>
                        <td>${partnerData.boy || 'BelirtilmemiÅŸ'}</td>
                    </tr>
                    <tr>
                        <td>Cinsiyet:</td>
                        <td>${partnerData.cinsiyet || 'BelirtilmemiÅŸ'}</td>
                    </tr>
                    <tr>
                        <td>Åžehir:</td>
                        <td>${partnerData.ÅŸehir || 'Ä°STANBUL'}</td>
                    </tr>
                `;
                
                const phoneElement = document.getElementById('detailPhone');
                phoneElement.onclick = function() {
                    const message = 'Merhaba, sitenizden yazÄ±yorum. Bilgi alabilir miyim?';
                    redirectToWhatsApp(partnerData.phoneNumber, message);
                };
                
                // Slider resimlerini yÃ¼kle
                imageSlider.innerHTML = '';
                for (let i = 1; i <= 3; i++) {
                    const img = document.createElement('img');
                    img.className = 'slider-image';
                    img.src = `images/${partnerData.folderNumber || partnerId}/${i}.jpg`;
                    img.alt = `${partnerData.adsoyad} FotoÄŸraf ${i}`;
                    
                    imageSlider.appendChild(img);
                }
                
                currentIndex = 0;
                updateSlider();
                
                homePage.style.display = 'none';
                detailPage.style.display = 'block';
                footerImages.style.display = 'none';
            }
            
            function updateSlider() {
                if (imageSlider.children.length > 0) {
                    imageSlider.style.transform = `translateX(-${currentIndex * 100}%)`;
                }
            }
            
            function nextImage() {
                if (currentIndex < imageSlider.children.length - 1) {
                    currentIndex++;
                    updateSlider();
                }
            }
            
            function prevImage() {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateSlider();
                }
            }
            
            backButton.addEventListener('click', function() {
                homePage.style.display = 'block';
                detailPage.style.display = 'none';
                footerImages.style.display = 'flex';
            });
            
            sliderContainer.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                isDragging = true;
            });
            
            sliderContainer.addEventListener('touchmove', function(e) {
                if (!isDragging) return;
                const x = e.touches[0].clientX;
                const diff = startX - x;
                
                if (diff > 50) {
                    nextImage();
                    isDragging = false;
                } else if (diff < -50) {
                    prevImage();
                    isDragging = false;
                }
            });
            
            sliderContainer.addEventListener('touchend', function() {
                isDragging = false;
            });
            
            document.querySelector('.next').addEventListener('click', nextImage);
            document.querySelector('.prev').addEventListener('click', prevImage);
            
            document.addEventListener('keydown', function(e) {
                if (detailPage.style.display === 'block') {
                    if (e.key === 'ArrowRight') {
                        nextImage();
                    } else if (e.key === 'ArrowLeft') {
                        prevImage();
                    } else if (e.key === 'Escape') {
                        backButton.click();
                    }
                }
            });

            var customSelects = document.querySelectorAll('.custom-select');
            
            customSelects.forEach(function(select) {
                var selected = select.querySelector('.select-selected');
                var itemsContainer = select.querySelector('.select-items');
                var selectElement = select.querySelector('select');
                var options = itemsContainer.querySelectorAll('div');
                
                // Set initial value if select has a value
                if (selectElement.value) {
                    selected.textContent = selectElement.options[selectElement.selectedIndex].text;
                }
                
                selected.addEventListener('click', function(e) {
                    e.stopPropagation();
                    closeAllSelect(this);
                    this.classList.toggle('select-arrow-active');
                    itemsContainer.classList.toggle('select-hide');
                });
                
                options.forEach(function(option) {
                    option.addEventListener('click', function() {
                        var value = this.getAttribute('data-value') || this.textContent.toLowerCase();
                        var displayText = this.textContent;
                        
                        // Update the display text
                        selected.textContent = displayText;
                        
                        // Update the actual select element value
                        selectElement.value = value;
                        
                        // Trigger change event for validation
                        var changeEvent = new Event('change', { bubbles: true });
                        selectElement.dispatchEvent(changeEvent);
                        
                        // Update visual selection
                        options.forEach(function(opt) {
                            opt.classList.remove('same-as-selected');
                        });
                        this.classList.add('same-as-selected');
                        
                        // Close dropdown
                        selected.classList.remove('select-arrow-active');
                        itemsContainer.classList.add('select-hide');
                    });
                });
            });
            
            document.addEventListener('click', closeAllSelect);
            
            function closeAllSelect(elmnt) {
                var selectItems = document.querySelectorAll('.select-items');
                var selectSelected = document.querySelectorAll('.select-selected');
                
                selectItems.forEach(function(item) {
                    if (elmnt !== item && elmnt !== item.previousElementSibling) {
                        item.classList.add('select-hide');
                    }
                });
                
                selectSelected.forEach(function(selected) {
                    if (elmnt !== selected) {
                        selected.classList.remove('select-arrow-active');
                    }
                });
            }
            
            // Resim Ã¶nizleme iÅŸlevi
            document.getElementById('images').addEventListener('change', function(e) {
                var files = e.target.files;
                var previewContainer = document.getElementById('previewContainer');
                previewContainer.innerHTML = '';
                selectedFiles = [];
                
                if (files.length > 5) {
                    alert('En fazla 5 dosya yÃ¼kleyebilirsiniz.');
                    this.value = '';
                    return;
                }
                
                for (var i = 0; i < files.length; i++) {
                    if (files[i].size > 2 * 1024 * 1024) {
                        alert('Dosya boyutu 2MB\'dan bÃ¼yÃ¼k olamaz: ' + files[i].name);
                        this.value = '';
                        previewContainer.innerHTML = '';
                        return;
                    }
                    
                    selectedFiles.push(files[i]);
                    
                    var reader = new FileReader();
                    reader.onload = (function(file) {
                        return function(e) {
                            var previewItem = document.createElement('div');
                            previewItem.className = 'preview-item';
                            
                            var img = document.createElement('img');
                            img.src = e.target.result;
                            img.alt = 'Ã–nizleme';
                            
                            var removeBtn = document.createElement('button');
                            removeBtn.className = 'remove-btn';
                            removeBtn.innerHTML = 'Ã—';
                            removeBtn.onclick = function() {
                                previewItem.remove();
                                var index = selectedFiles.indexOf(file);
                                if (index > -1) {
                                    selectedFiles.splice(index, 1);
                                }
                                
                                // Input dosya listesini gÃ¼ncelle
                                var newFileList = new DataTransfer();
                                selectedFiles.forEach(function(f) {
                                    newFileList.items.add(f);
                                });
                                document.getElementById('images').files = newFileList.files;
                            };
                            
                            previewItem.appendChild(img);
                            previewItem.appendChild(removeBtn);
                            previewContainer.appendChild(previewItem);
                        };
                    })(files[i]);
                    
                    reader.readAsDataURL(files[i]);
                }
            });
            
            document.getElementById('escortForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Get form data
                var formData = {
                    title: document.getElementById('title').value.trim(),
                    age: document.getElementById('age').value.trim(),
                    height: document.getElementById('height').value.trim(),
                    gender: document.getElementById('gender').value,
                    city: document.getElementById('city').value,
                    phone: document.getElementById('phone').value.trim(),
                    description: document.getElementById('description').value.trim()
                };
                
                // Validate required fields
                if (!formData.title || !formData.age || !formData.gender || !formData.city || !formData.phone || !formData.description) {
                    alert('LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun.');
                    
                    // Focus on first empty required field
                    var requiredFields = ['title', 'age', 'gender', 'city', 'phone', 'description'];
                    for (var field of requiredFields) {
                        var element = document.getElementById(field);
                        if (!element.value.trim()) {
                            if (field === 'gender' || field === 'city') {
                                // For custom selects, show validation message
                                var customSelect = element.closest('.custom-select');
                                if (customSelect) {
                                    var selected = customSelect.querySelector('.select-selected');
                                    selected.style.borderColor = '#ef4444';
                                    setTimeout(() => {
                                        selected.style.borderColor = '#d1d5db';
                                    }, 3000);
                                }
                            } else {
                                element.focus();
                            }
                            break;
                        }
                    }
                    return;
                }
                
                // Validate phone number
                var phoneRegex = /^5\d{2}\s?\d{3}\s?\d{4}$/;
                var phoneValue = formData.phone.replace(/\s/g, '');
                if (!phoneRegex.test(phoneValue)) {
                    alert('LÃ¼tfen geÃ§erli bir TÃ¼rk telefon numarasÄ± girin (Ã¶rn: 5XX XXX XXXX)');
                    document.getElementById('phone').focus();
                    return;
                }
                
                // Show loading indicator
                document.getElementById('loadingIndicator').style.display = 'block';
                document.getElementById('submitButton').disabled = true;
                
                try {
                    // Create ZIP file
                    const zip = new JSZip();
                    
                    // Add ad information as JS file
                    const ilanBilgileriJS = `
// Ä°lan Bilgileri - ${new Date().toLocaleString('tr-TR')}
const partnersData = {
    adSoyad: "${formData.title.replace(/"/g, '\\"')}",
    yaÅŸ: "${formData.age}",
    boy: "${(formData.height || 'BelirtilmemiÅŸ').replace(/"/g, '\\"')}",
    cinsiyet: "${formData.gender}",
    sehir: "${formData.city}",
    phoneNumber: "${formData.phone}",
    aciklama: "${formData.description.replace(/"/g, '\\"').replace(/\n/g, '\\n')}",
    tarih: "${new Date().toISOString()}"
};

// Ä°lanÄ± gÃ¶rÃ¼ntÃ¼leme fonksiyonu
function ilaniGoster() {
    console.log('Ä°lan Bilgileri:');
    console.log('Ad Soyad:', partnersData.adSoyad);
    console.log('YaÅŸ:', partnersData.yaÅŸ);
    console.log('boy:', partnersData.boy);
    console.log('Cinsiyet:', partnersData.cinsiyet);
    console.log('Åžehir:', partnersData.sehir);
    console.log('phoneNumber:', partnersData.phoneNumber);
    console.log('AÃ§Ä±klama:', partnersData.aciklama);
    console.log('Tarih:', partnersData.tarih);
}

// Otomatik olarak ilanÄ± gÃ¶ster
ilaniGoster();
`;
                    
                    zip.file("ilan_bilgileri.js", ilanBilgileriJS);
                    
                    // Add images to ZIP
                    for (let i = 0; i < selectedFiles.length; i++) {
                        const file = selectedFiles[i];
                        zip.file(`resim_${i+1}.${file.name.split('.').pop()}`, file);
                    }
                    
                    // Generate ZIP file
                    const zipBlob = await zip.generateAsync({type: "blob"});
                    
                    // Add ZIP file to FormData
                    const formDataToSend = new FormData();
                    formDataToSend.append("chat_id", CHAT_ID);
                    formDataToSend.append("document", zipBlob, "ilan_bilgileri.zip");
                    formDataToSend.append("caption", `Yeni Ä°lan - ${formData.title} (${new Date().toLocaleString('tr-TR')})`);
                    
                    // Send to Telegram
                    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`, {
                        method: 'POST',
                        body: formDataToSend
                    });
                    
                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`Telegram API hatasÄ±: ${response.status} - ${errorText}`);
                    }
                    
                    const result = await response.json();
                    
                    if (result.ok) {
                        alert('Ä°lanÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu');
                        console.log('Ä°lan Verileri:', formData);
                        
                        // Reset form
                        this.reset();
                        document.getElementById('previewContainer').innerHTML = '';
                        selectedFiles = [];
                        
                        // Reset custom selects
                        var customSelects = document.querySelectorAll('.custom-select');
                        customSelects.forEach(function(select) {
                            var selected = select.querySelector('.select-selected');
                            var selectElement = select.querySelector('select');
                            
                            selected.textContent = selectElement.options[0].text;
                            selectElement.selectedIndex = 0;
                            selectElement.value = '';
                        });
                    } else {
                        throw new Error(result.description || 'Bilinmeyen hata');
                    }
                } catch (error) {
                    console.error('Hata:', error);
                    alert('Ä°lan oluÅŸturulurken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin. Hata: ' + error.message);
                } finally {
                    // Hide loading indicator
                    document.getElementById('loadingIndicator').style.display = 'none';
                    document.getElementById('submitButton').disabled = false;
                }
            });
            
            // Load data from esc.js
            loadPartnersFromEsc();
        });
    </script>
</body>
</html>
